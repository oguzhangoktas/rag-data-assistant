# Business Metrics Definitions

## Revenue Metrics

### Total Revenue
- **Definition**: Sum of total_amount from completed orders
- **Formula**: `SUM(total_amount) WHERE status = 'completed'`
- **Use Cases**: Overall business performance, trend analysis

### Average Order Value (AOV)
- **Definition**: Average amount per order
- **Formula**: `AVG(total_amount)`
- **Use Cases**: Customer behavior analysis, pricing strategy

### Monthly Recurring Revenue (MRR)
- **Definition**: Revenue from the current month
- **Formula**: `SUM(total_amount) WHERE order_date >= DATE_TRUNC('month', CURRENT_DATE)`

## Customer Metrics

### Customer Lifetime Value (CLV)
- **Definition**: Total revenue generated by a customer over their entire relationship
- **Formula**: `total_lifetime_value` from customers table or `SUM(orders.total_amount) WHERE status = 'completed'`
- **Use Cases**: Customer segmentation, marketing ROI

### Customer Count
- **Definition**: Number of unique customers
- **Formula**: `COUNT(DISTINCT customer_id)`

### New Customers
- **Definition**: Customers registered in a specific period
- **Formula**: `COUNT(*) WHERE registration_date BETWEEN start_date AND end_date`

## Order Metrics

### Order Count
- **Definition**: Total number of orders
- **Formula**: `COUNT(order_id)`

### Order Status Distribution
- **Definition**: Breakdown of orders by status
- **Formula**: `COUNT(*) GROUP BY status`

### Orders by Payment Method
- **Definition**: Distribution of payment methods used
- **Formula**: `COUNT(*) GROUP BY payment_method`

## Product Metrics

### Top Selling Products
- **Definition**: Products with highest quantity sold
- **Formula**: `SUM(quantity) GROUP BY product_id ORDER BY SUM(quantity) DESC`

### Revenue by Category
- **Definition**: Total revenue broken down by product category
- **Formula**: `SUM(order_items.price * order_items.quantity) GROUP BY products.category`

### Low Stock Products
- **Definition**: Products with stock below threshold
- **Formula**: `SELECT * FROM products WHERE stock_quantity < 10`

## Time-Based Analysis

### This Month vs Last Month
Compare metrics between current and previous month:
```sql
SELECT 
  SUM(CASE WHEN order_date >= DATE_TRUNC('month', CURRENT_DATE) THEN total_amount ELSE 0 END) as this_month,
  SUM(CASE WHEN order_date >= DATE_TRUNC('month', CURRENT_DATE - INTERVAL '1 month') 
           AND order_date < DATE_TRUNC('month', CURRENT_DATE) THEN total_amount ELSE 0 END) as last_month
FROM orders
WHERE status = 'completed'
```

### Quarter over Quarter Growth
- **Definition**: Percentage change from previous quarter
- **Formula**: `(current_quarter - previous_quarter) / previous_quarter * 100`
